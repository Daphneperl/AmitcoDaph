<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simple HTML Page</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&family=Source+Code+Pro:wght@400;600;700&family=Anonymous+Pro:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        color: white;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        min-height: 100vh;
        display: flex;
        align-items: center;
        position: relative;
      }

      .fixed-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: black;
        background-image: url("assets/bckg.jpg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        z-index: -2;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: black;
        opacity: 0.7;
        z-index: -1;
      }

      body::after {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
          ellipse at center,
          transparent 0%,
          rgba(0, 0, 0, 0.4) 70%,
          rgba(0, 0, 0, 0.8) 100%
        );
        z-index: -1;
      }

      .animation-container {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-95%, -50%);
        width: 400px;
        height: 400px;
        transition: all 1.5s linear;
      }

      .animation-container-right {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-5%, -50%);
        width: 400px;
        height: 400px;
        transition: all 1.5s linear;
      }

      /* Move to bottom corners on first scroll */
      body.moved-to-corners .animation-container {
        left: 12%;
        top: 80%;
        transform: translate(-50%, -50%);
        width: 250px;
        height: 250px;
      }

      body.moved-to-corners .animation-container-right {
        left: 88%;
        top: 80%;
        transform: translate(-50%, -50%);
        width: 250px;
        height: 250px;
      }

      .spinning-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: contain;
        opacity: 0;
        animation: instantSwitch 1.6s infinite;
        animation-timing-function: steps(1, end);
        animation-play-state: paused;
      }

      /* Before scrolling: hide ALL frames first */
      body:not(.scrolling) .spinning-image {
        opacity: 0 !important;
        animation-play-state: paused;
      }

      /* Before scrolling: show ONLY the specific 4th frames */
      body:not(.scrolling) .animation-container .spinning-image:nth-child(8),
      body:not(.scrolling)
        .animation-container-right
        .spinning-image:nth-child(4) {
        opacity: 1 !important;
        animation-play-state: paused;
      }

      /* When scrolling starts, run normal animation for all frames */
      body.scrolling .spinning-image {
        opacity: 0;
        animation-play-state: running;
      }

      .spinning-image:nth-child(1) {
        animation-delay: 0s;
      }
      .spinning-image:nth-child(2) {
        animation-delay: 0.2s;
      }
      .spinning-image:nth-child(3) {
        animation-delay: 0.4s;
      }
      .spinning-image:nth-child(4) {
        animation-delay: 0.6s;
      }
      .spinning-image:nth-child(5) {
        animation-delay: 0.8s;
      }
      .spinning-image:nth-child(6) {
        animation-delay: 1s;
      }
      .spinning-image:nth-child(7) {
        animation-delay: 1.2s;
      }
      .spinning-image:nth-child(8) {
        animation-delay: 1.4s;
      }

      @keyframes instantSwitch {
        0%,
        12.5% {
          opacity: 1;
        }
        12.5%,
        100% {
          opacity: 0;
        }
      }

      .content {
        position: fixed;
        top: 50px;
        left: 50%;
        transform: translateX(-50%);
        text-align: center;
        z-index: 10;
      }

      .experiment-title {
        outline: none;
        font-size: 4rem;
        text-align: center;
        font-family: "Source Code Pro", monospace;
        color: white;
        margin: 0;
        padding: 20px 0;
        animation: cray 6s infinite steps(50);
        display: inline-block;
        letter-spacing: 0.1em;
      }

      .experiment-title * {
        animation: cray 6s infinite steps(50);
        display: inline-block;
      }

      @keyframes cray {
        0% {
          font-weight: 400;
          font-style: normal;
          text-decoration: none;
          text-transform: uppercase;
        }
        2% {
          font-weight: 700;
          font-style: italic;
          text-decoration: underline;
          text-transform: lowercase;
        }
        4% {
          font-weight: 200;
          font-style: normal;
          text-decoration: line-through;
          text-transform: capitalize;
        }
        6% {
          font-weight: 600;
          font-style: normal;
          text-decoration: none;
          text-transform: none;
        }
        8% {
          font-weight: 300;
          font-style: italic;
          text-decoration: underline;
          text-transform: uppercase;
        }
        10% {
          font-weight: 500;
          font-style: normal;
          text-decoration: none;
          text-transform: lowercase;
        }
        12% {
          font-weight: 700;
          font-style: normal;
          text-decoration: line-through;
          text-transform: capitalize;
        }
        14% {
          font-weight: 400;
          font-style: italic;
          text-decoration: none;
          text-transform: none;
        }
        16% {
          font-weight: 600;
          font-style: normal;
          text-decoration: underline;
          text-transform: uppercase;
        }
        18% {
          font-weight: 200;
          font-style: normal;
          text-decoration: none;
          text-transform: lowercase;
        }
        20% {
          font-weight: 700;
          font-style: italic;
          text-decoration: line-through;
          text-transform: capitalize;
        }
        22% {
          font-weight: 300;
          font-style: normal;
          text-decoration: none;
          text-transform: none;
        }
        24% {
          font-weight: 500;
          font-style: normal;
          text-decoration: underline;
          text-transform: uppercase;
        }
        26% {
          font-weight: 400;
          font-style: italic;
          text-decoration: none;
          text-transform: lowercase;
        }
        28% {
          font-weight: 600;
          font-style: normal;
          text-decoration: line-through;
          text-transform: capitalize;
        }
        30% {
          font-weight: 700;
          font-style: normal;
          text-decoration: none;
          text-transform: none;
        }
        32% {
          font-weight: 200;
          font-style: italic;
          text-decoration: underline;
          text-transform: uppercase;
        }
        34% {
          font-weight: 500;
          font-style: normal;
          text-decoration: none;
          text-transform: lowercase;
        }
        36% {
          font-weight: 300;
          font-style: normal;
          text-decoration: line-through;
          text-transform: capitalize;
        }
        38% {
          font-weight: 600;
          font-style: italic;
          text-decoration: none;
          text-transform: none;
        }
        40% {
          font-weight: 400;
          font-style: normal;
          text-decoration: underline;
          text-transform: uppercase;
        }
        42% {
          font-weight: 700;
          font-style: normal;
          text-decoration: none;
          text-transform: lowercase;
        }
        44% {
          font-weight: 200;
          font-style: italic;
          text-decoration: line-through;
          text-transform: capitalize;
        }
        46% {
          font-weight: 500;
          font-style: normal;
          text-decoration: none;
          text-transform: none;
        }
        48% {
          font-weight: 300;
          font-style: normal;
          text-decoration: underline;
          text-transform: uppercase;
        }
        50% {
          font-weight: 600;
          font-style: italic;
          text-decoration: none;
          text-transform: lowercase;
        }
        52% {
          font-weight: 700;
          font-style: normal;
          text-decoration: line-through;
          text-transform: capitalize;
        }
        54% {
          font-weight: 400;
          font-style: normal;
          text-decoration: none;
          text-transform: none;
        }
        56% {
          font-weight: 200;
          font-style: italic;
          text-decoration: underline;
          text-transform: uppercase;
        }
        58% {
          font-weight: 500;
          font-style: normal;
          text-decoration: none;
          text-transform: lowercase;
        }
        60% {
          font-weight: 300;
          font-style: normal;
          text-decoration: line-through;
          text-transform: capitalize;
        }
        62% {
          font-weight: 600;
          font-style: italic;
          text-decoration: none;
          text-transform: none;
        }
        64% {
          font-weight: 700;
          font-style: normal;
          text-decoration: underline;
          text-transform: uppercase;
        }
        66% {
          font-weight: 400;
          font-style: normal;
          text-decoration: none;
          text-transform: lowercase;
        }
        68% {
          font-weight: 200;
          font-style: italic;
          text-decoration: line-through;
          text-transform: capitalize;
        }
        70% {
          font-weight: 500;
          font-style: normal;
          text-decoration: none;
          text-transform: none;
        }
        72% {
          font-weight: 300;
          font-style: normal;
          text-decoration: underline;
          text-transform: uppercase;
        }
        74% {
          font-weight: 600;
          font-style: italic;
          text-decoration: none;
          text-transform: lowercase;
        }
        76% {
          font-weight: 700;
          font-style: normal;
          text-decoration: line-through;
          text-transform: capitalize;
        }
        78% {
          font-weight: 400;
          font-style: normal;
          text-decoration: none;
          text-transform: none;
        }
        80% {
          font-weight: 200;
          font-style: italic;
          text-decoration: underline;
          text-transform: uppercase;
        }
        82% {
          font-weight: 500;
          font-style: normal;
          text-decoration: none;
          text-transform: lowercase;
        }
        84% {
          font-weight: 300;
          font-style: normal;
          text-decoration: line-through;
          text-transform: capitalize;
        }
        86% {
          font-weight: 600;
          font-style: italic;
          text-decoration: none;
          text-transform: none;
        }
        88% {
          font-weight: 700;
          font-style: normal;
          text-decoration: underline;
          text-transform: uppercase;
        }
        90% {
          font-weight: 400;
          font-style: normal;
          text-decoration: none;
          text-transform: lowercase;
        }
        92% {
          font-weight: 200;
          font-style: italic;
          text-decoration: line-through;
          text-transform: capitalize;
        }
        94% {
          font-weight: 500;
          font-style: normal;
          text-decoration: none;
          text-transform: none;
        }
        96% {
          font-weight: 300;
          font-style: normal;
          text-decoration: underline;
          text-transform: uppercase;
        }
        98% {
          font-weight: 600;
          font-style: italic;
          text-decoration: none;
          text-transform: lowercase;
        }
        100% {
          font-weight: 400;
          font-style: normal;
          text-decoration: none;
          text-transform: uppercase;
        }
      }

      .content p {
        font-family: "Source Code Pro", monospace;
        font-weight: 400;
      }

      /* Typewriter Animation for Creative coding duo */
      .cursor {
        position: relative;
        width: 18em;
        margin: 0 auto;
        border-right: 2px solid rgba(255, 255, 255, 0.75);
        font-size: 1.2rem;
        font-family: "Source Code Pro", monospace;
        text-align: center;
        white-space: nowrap;
        overflow: hidden;
        margin-top: 10px;
      }

      .typewriter-animation {
        animation: typewriter 3s steps(18) 0.5s 1 normal both,
          blinkingCursor 500ms steps(50) infinite normal;
      }

      @keyframes typewriter {
        from {
          width: 0;
        }
        to {
          width: 100%;
        }
      }

      @keyframes blinkingCursor {
        from {
          border-right-color: rgba(255, 255, 255, 0.75);
        }
        to {
          border-right-color: transparent;
        }
      }

      /* Character labels above figures */
      .character-labels {
        position: fixed;
        z-index: 15;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .amitco-labels {
        left: 12%;
        top: 55%;
        transform: translate(-50%, -50%);
      }

      .daph-labels {
        left: 88%;
        top: 55%;
        transform: translate(-50%, -50%);
      }

      .character-label {
        font-family: "Source Code Pro", monospace;
        font-size: 1rem;
        color: white;
        opacity: 0;
        visibility: hidden;
        white-space: nowrap;
        margin-bottom: 8px;
        text-align: center;
        transition: opacity 0.5s ease, visibility 0s linear 0.5s;
      }

      /* Show labels only when figures move to corners - with delay */
      body.moved-to-corners .character-label {
        opacity: 1;
        visibility: visible;
        transition: opacity 0.5s ease 1.5s, visibility 0s linear 1.5s;
      }

      /* Hide labels immediately when scrolling back up */
      body:not(.moved-to-corners) .character-label {
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0s linear 0.3s;
      }

      /* Navigation buttons - center single card (stacked) */
      .navigation-titles {
        position: fixed;
        left: 50%;
        top: 58%;
        transform: translate(-50%, -50%);
        z-index: 15;
        width: 0;
        height: 0;
      }

      .nav-button {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        padding: 0;
        font-family: "Source Code Pro", monospace;
        font-size: 1.3rem;
        text-transform: none;
        border: 0;
        line-height: 1.1;
        cursor: pointer;
        background: transparent;
        color: white;
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
        transition: opacity 0.35s ease, visibility 0s linear 0.35s,
          transform 0.35s ease;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      /* hide decorative corner frames */
      .nav-button .corners {
        display: none;
      }

      .nav-button .icon {
        width: 360px;
        height: 360px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        transform-origin: 50% 50%;
        will-change: transform;
      }

      .nav-button .icon img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        pointer-events: none;
      }

      .nav-label {
        position: absolute;
        top: -14px; /* near the top edge of the card */
        left: -10px; /* on the card */
        transform: none;
        background: #000;
        color: #fff;
        padding: 10px 14px;
        border-radius: 4px;
        font-size: 1.1rem;
        line-height: 1;
        pointer-events: none;
        white-space: nowrap;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
        opacity: 0.9;
      }

      /* Active card keeps label in place; inactive cards also show label on its own card */
      .menu-ready.menu-about .about-btn .nav-label {
        left: -10px;
      }
      .menu-ready.menu-projects .projects-btn .nav-label {
        left: -10px;
      }
      .menu-ready.menu-playground .playground-btn .nav-label {
        left: -10px;
      }

      .nav-button:focus-visible {
        outline: none;
      }

      .nav-button:is(:focus-visible, :hover) {
        color: #e6e6e6;
      }

      /* Subtle vibrate on hover */
      .nav-button:hover .icon,
      .nav-button:focus-visible .icon {
        animation: vibrate 0.5s infinite;
      }

      @keyframes vibrate {
        0% {
          transform: rotate(0deg);
        }
        10% {
          transform: rotate(-1deg);
        }
        20% {
          transform: rotate(1deg);
        }
        30% {
          transform: rotate(0deg);
        }
        40% {
          transform: rotate(1deg);
        }
        50% {
          transform: rotate(-1deg);
        }
        60% {
          transform: rotate(0deg);
        }
        70% {
          transform: rotate(-1deg);
        }
        80% {
          transform: rotate(1deg);
        }
        90% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(-1deg);
        }
      }

      /* Gate visibility until menu-ready */
      .menu-ready .nav-button {
        visibility: visible;
      }

      /* Stacked states - show one active, others peek under it */
      .menu-ready.menu-about .about-btn {
        opacity: 1;
        pointer-events: auto;
        transform: translate(-50%, -50%) scale(1);
        z-index: 3;
      }
      .menu-ready.menu-about .projects-btn {
        opacity: 0.22;
        transform: translate(-50%, calc(-50% + 42px)) scale(0.94);
        z-index: 2;
        pointer-events: none;
      }
      .menu-ready.menu-about .playground-btn {
        opacity: 0.12;
        transform: translate(-50%, calc(-50% + 84px)) scale(0.9);
        z-index: 1;
        pointer-events: none;
      }

      .menu-ready.menu-projects .projects-btn {
        opacity: 1;
        pointer-events: auto;
        transform: translate(-50%, -50%) scale(1);
        z-index: 3;
      }
      .menu-ready.menu-projects .playground-btn {
        opacity: 0.22;
        transform: translate(-50%, calc(-50% + 42px)) scale(0.94);
        z-index: 2;
        pointer-events: none;
      }
      .menu-ready.menu-projects .about-btn {
        opacity: 0.12;
        transform: translate(-50%, calc(-50% + 84px)) scale(0.9);
        z-index: 1;
        pointer-events: none;
      }

      .menu-ready.menu-playground .playground-btn {
        opacity: 1;
        pointer-events: auto;
        transform: translate(-50%, -50%) scale(1);
        z-index: 3;
      }
      .menu-ready.menu-playground .about-btn {
        opacity: 0.22;
        transform: translate(-50%, calc(-50% + 42px)) scale(0.94);
        z-index: 2;
        pointer-events: none;
      }
      .menu-ready.menu-playground .projects-btn {
        opacity: 0.12;
        transform: translate(-50%, calc(-50% + 84px)) scale(0.9);
        z-index: 1;
        pointer-events: none;
      }

      /* Arrow under About */
      .about-btn .down-arrow {
        position: absolute;
        bottom: -22px;
        left: 50%;
        transform: translateX(-50%);
        color: #fff;
        font-size: 22px;
        opacity: 0.85;
        pointer-events: none;
        animation: arrow-bounce 1.2s infinite ease-in-out;
        display: none;
      }
      @keyframes arrow-bounce {
        0%,
        100% {
          transform: translate(-50%, 0);
        }
        50% {
          transform: translate(-50%, 7px);
        }
      }
      .menu-ready.menu-about .about-btn .down-arrow {
        display: block;
      }

      .corners {
        container-type: size;
        pointer-events: none;
        position: absolute;
        inset: 0;
        z-index: 3;

        span {
          width: 10px;
          height: 10px;
          display: grid;
          place-items: center;
          offset-path: border-box;

          svg {
            width: 100%;
          }

          &:nth-of-type(1) {
            offset-distance: 0;
          }
          &:nth-of-type(2) {
            offset-distance: 100cqi;
          }
          &:nth-of-type(3) {
            offset-rotate: 180deg;
            offset-distance: calc(100cqi + 100cqh);
          }
          &:nth-of-type(4) {
            offset-rotate: 180deg;
            offset-distance: -100cqh;
          }
        }
      }

      /* Modal styles */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0s linear 0.3s;
      }

      .modal-overlay.active {
        opacity: 1;
        visibility: visible;
        transition: opacity 0.3s ease, visibility 0s linear 0s;
      }

      .modal-content {
        background: white;
        padding: 2rem;
        border-radius: 8px;
        max-width: 600px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        position: relative;
        transform: scale(0.8);
        transition: transform 0.3s ease;
      }

      .modal-overlay.active .modal-content {
        transform: scale(1);
      }

      .modal-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: none;
        border: none;
        font-size: 2rem;
        cursor: pointer;
        color: #666;
        line-height: 1;
        padding: 0;
        width: 2rem;
        height: 2rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .modal-close:hover {
        color: #000;
      }

      .modal-text {
        font-family: "Source Code Pro", monospace;
        font-size: 0.85rem;
        line-height: 1.5;
        color: #333;
        margin-top: 1rem;
      }

      .modal-text p {
        margin-bottom: 1rem;
      }

      .modal-text p:last-child {
        margin-bottom: 0;
      }

      .contact-section {
        margin-top: 1.5rem;
        padding-top: 1rem;
        border-top: 1px solid #eee;
      }

      .contact-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1rem;
      }

      .contact-section h3 {
        font-family: "Source Code Pro", monospace;
        font-size: 1.2rem;
        font-weight: 600;
        margin: 0;
        color: #333;
        flex-shrink: 0;
      }

      .ascii-art {
        font-family: "Source Code Pro", monospace;
        font-size: 0.5rem;
        line-height: 1;
        color: #666;
        white-space: pre;
        overflow-x: auto;
        flex-shrink: 0;
      }

      .contact-items {
        display: flex;
        gap: 2rem;
        flex-wrap: wrap;
      }

      .contact-item {
        flex: 1;
        min-width: 200px;
        font-family: "Source Code Pro", monospace;
        font-size: 0.8rem;
        line-height: 1.4;
      }

      .contact-item strong {
        color: #333;
        font-weight: 600;
      }

      .contact-item a {
        color: #666;
        text-decoration: none;
        transition: color 0.2s ease;
      }

      .contact-item a:hover {
        color: #000;
        text-decoration: underline;
      }

      /* Playground modal styles */
      .playground-modal {
        background: white;
        min-height: 300px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .coming-soon {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 2rem;
      }

      .text-container {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .key {
        font-family: "Source Code Pro", monospace;
        font-weight: 900;
        font-size: 4rem;
        display: inline-block;
        letter-spacing: -0.2rem;
        color: #333;
        transition: transform 0.2s;
      }

      .key-space {
        display: inline-block;
        width: 0.5rem;
      }

      .coming-soon .ascii-art {
        font-family: "Source Code Pro", monospace;
        font-size: 0.6rem;
        line-height: 1.2;
        color: #666;
        text-align: center;
        white-space: pre;
        margin: 0;
      }

      @keyframes pressDown1 {
        30%,
        40%,
        100% {
          transform: translateY(0);
        }
        35% {
          transform: translateY(8px);
        }
      }

      @keyframes pressDown2 {
        70%,
        80%,
        100% {
          transform: translateY(0);
        }
        75% {
          transform: translateY(8px);
        }
      }

      @keyframes pressDown3 {
        30%,
        40%,
        100% {
          transform: translateY(0);
        }
        35% {
          transform: translateY(8px);
        }
      }

      @keyframes pressDown4 {
        40%,
        50%,
        100% {
          transform: translateY(0);
        }
        45% {
          transform: translateY(8px);
        }
      }

      @keyframes pressDown5 {
        20%,
        30%,
        100% {
          transform: translateY(0);
        }
        25% {
          transform: translateY(8px);
        }
      }

      @keyframes pressDown6 {
        60%,
        70%,
        100% {
          transform: translateY(0);
        }
        65% {
          transform: translateY(8px);
        }
      }

      @keyframes pressDown7 {
        10%,
        20%,
        100% {
          transform: translateY(0);
        }
        15% {
          transform: translateY(8px);
        }
      }

      @keyframes pressDown8 {
        35%,
        45%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(8px);
        }
      }

      @keyframes pressDown9 {
        50%,
        60%,
        100% {
          transform: translateY(0);
        }
        55% {
          transform: translateY(8px);
        }
      }

      @keyframes pressDown10 {
        25%,
        35%,
        100% {
          transform: translateY(0);
        }
        30% {
          transform: translateY(8px);
        }
      }

      @keyframes pressDown11 {
        65%,
        75%,
        100% {
          transform: translateY(0);
        }
        70% {
          transform: translateY(8px);
        }
      }

      @keyframes pressDown12 {
        45%,
        55%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(8px);
        }
      }

      @keyframes pressDown13 {
        15%,
        25%,
        100% {
          transform: translateY(0);
        }
        20% {
          transform: translateY(8px);
        }
      }

      .key:nth-child(1) {
        animation: pressDown1 2s infinite;
      }
      .key:nth-child(2) {
        animation: pressDown2 3s infinite;
      }
      .key:nth-child(3) {
        animation: pressDown3 4s infinite;
      }
      .key:nth-child(4) {
        animation: pressDown4 2.5s infinite;
      }
      .key:nth-child(5) {
        animation: pressDown5 2.5s infinite;
      }
      .key:nth-child(6) {
        animation: pressDown6 3.5s infinite;
      }
      .key:nth-child(8) {
        animation: pressDown7 2.2s infinite;
      }
      .key:nth-child(9) {
        animation: pressDown8 3.2s infinite;
      }
      .key:nth-child(10) {
        animation: pressDown9 2.8s infinite;
      }
      .key:nth-child(11) {
        animation: pressDown10 3.8s infinite;
      }
      .key:nth-child(12) {
        animation: pressDown11 2.1s infinite;
      }
      .key:nth-child(13) {
        animation: pressDown12 3.1s infinite;
      }
      .key:nth-child(14) {
        animation: pressDown13 2.7s infinite;
      }

      /* STACK CAROUSEL STYLES */
      /* Show stack only after menu-ready */
      #menuStack {
        display: none;
      }
      body.menu-ready #menuStack {
        display: grid;
      }
      /* center fixed */
      #menuStack {
        position: fixed;
        left: 50%;
        top: 58%;
        transform: translate(-50%, -50%);
        z-index: 20;
        --p: var(--k);
        --abs-p: abs(var(--k) - var(--p));
        --end: clamp(0, var(--abs-p) - 1, 1);
        --dir: calc((1 - 2 * var(--end)) * sign(var(--k) - var(--p)));
        --fwd: calc(0.5 * (1 + var(--dir)));
        --v: var(--k);
        --abs-v: abs(var(--v) - var(--p));
        --prg: calc(
          var(--abs-v) / (1 - var(--end) + var(--end) * (var(--n) - 1))
        );
        grid-gap: 1.25em 0;
        grid-template: auto auto / 1fr;
        justify-items: center;
        color: #f1f5f9;
        transition: --p 0s 0.8s, --v 0.8s;
        perspective: 900px;
      }
      #menuStack > article {
        --abs-top: abs(var(--k) - var(--i));
        --not-top: min(1, var(--abs-top));
        --top: calc(1 - var(--not-top));
        --val-mov: (
          (1 - var(--fwd)) * var(--p) + var(--fwd) * var(--k) - var(--i)
        );
        --abs-mov: abs(var(--val-mov));
        --not-mov: min(1, var(--abs-mov));
        --mov: calc(1 - var(--not-mov));
        grid-area: 1 / 1;
        grid-template: subgrid / subgrid;
        z-index: mod(calc(var(--n) - 1 + var(--i) - var(--k)), var(--n));
        transition: z-index 0.8s cubic-bezier(1, -0.9, 0, 1.9);
      }
      #menuStack h2,
      #menuStack em {
        display: none;
      }
      #menuStack img {
        --sin: sin(var(--prg) * 0.5turn);
        --tx: calc(-150% * var(--mov) * sqrt(var(--sin)));
        --r2d: calc((1 - var(--sin)) * var(--a));
        --ry: calc(var(--dir) * var(--mov) * var(--sin) * 18deg);
        grid-area: 1 / 1 / -1 / -1;
        height: 18em;
        aspect-ratio: 1;
        object-fit: contain;
        transform: translate(var(--tx)) rotate(var(--r2d)) rotateY(var(--ry));
        filter: blur(calc(var(--not-top) * 4px));
        opacity: calc(1 - var(--not-top) * 0.35);
        transition: filter 0.8s, opacity 0.8s, transform 0.8s;
      }
      /* hide the previous navigation when stack is ready */
      body.menu-ready .navigation-titles {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="fixed-background"></div>
    <div class="animation-container">
      <img
        src="assets/spinning-ladies/amitco/amitco_5.png"
        alt="Spinning lady 1"
        class="spinning-image"
      />
      <img
        src="assets/spinning-ladies/amitco/amitco_6.png"
        alt="Spinning lady 2"
        class="spinning-image"
      />
      <img
        src="assets/spinning-ladies/amitco/amitco_7.png"
        alt="Spinning lady 3"
        class="spinning-image"
      />
      <img
        src="assets/spinning-ladies/amitco/amitco_8.png"
        alt="Spinning lady 4"
        class="spinning-image"
      />
      <img
        src="assets/spinning-ladies/amitco/amitco_1.png"
        alt="Spinning lady 5"
        class="spinning-image"
      />
      <img
        src="assets/spinning-ladies/amitco/amitco_2.png"
        alt="Spinning lady 6"
        class="spinning-image"
      />
      <img
        src="assets/spinning-ladies/amitco/amitco_3.png"
        alt="Spinning lady 7"
        class="spinning-image"
      />
      <img
        src="assets/spinning-ladies/amitco/amitco_4.png"
        alt="Spinning lady 8"
        class="spinning-image"
      />
    </div>

    <div class="animation-container-right">
      <img
        src="assets/spinning-ladies/Daph/Daph2_1.png"
        alt="Daph 1"
        class="spinning-image"
      />
      <img
        src="assets/spinning-ladies/Daph/Daph2_2.png"
        alt="Daph 2"
        class="spinning-image"
      />
      <img
        src="assets/spinning-ladies/Daph/Daph2_3.png"
        alt="Daph 3"
        class="spinning-image"
      />
      <img
        src="assets/spinning-ladies/Daph/Daph2_4.png"
        alt="Daph 4"
        class="spinning-image"
      />
      <img
        src="assets/spinning-ladies/Daph/Daph2_5.png"
        alt="Daph 5"
        class="spinning-image"
      />
      <img
        src="assets/spinning-ladies/Daph/Daph2_6.png"
        alt="Daph 6"
        class="spinning-image"
      />
      <img
        src="assets/spinning-ladies/Daph/Daph2_7.png"
        alt="Daph 7"
        class="spinning-image"
      />
      <img
        src="assets/spinning-ladies/Daph/Daph2_8.png"
        alt="Daph 8"
        class="spinning-image"
      />
    </div>

    <!-- Character labels that appear on scroll -->
    <div class="character-labels amitco-labels">
      <div class="character-label amitco-line1">Designer</div>
      <div class="character-label amitco-line2">Animator</div>
      <div class="character-label amitco-line3">Creative web developer</div>
    </div>
    <div class="character-labels daph-labels">
      <div class="character-label daph-line1">Designer</div>
      <div class="character-label daph-line2">Scientific Illustrator</div>
      <div class="character-label daph-line3">Creative web developer</div>
    </div>

    <!-- Navigation buttons that appear in center on scroll -->
    <div class="navigation-titles">
      <button class="nav-button about-btn" aria-label="About">
        <span class="icon"
          ><img data-name="About" src="assets/About_label.png" alt="About icon"
        /></span>
        <div class="down-arrow">▼</div>
      </button>

      <button class="nav-button projects-btn" aria-label="Projects">
        <span class="icon"
          ><img
            data-name="Projects"
            src="assets/Projects_label.png"
            alt="Projects icon"
        /></span>
      </button>

      <button class="nav-button playground-btn" aria-label="Playground">
        <span class="icon"
          ><img
            data-name="Playground"
            src="assets/Playground_label.png"
            alt="Playground icon"
        /></span>
      </button>
    </div>

    <!-- Playground Modal -->
    <div class="modal-overlay" id="playgroundModal">
      <div class="modal-content playground-modal">
        <button class="modal-close" id="closePlaygroundModal">&times;</button>
        <div class="coming-soon">
          <div class="text-container">
            <span class="key">C</span>
            <span class="key">o</span>
            <span class="key">m</span>
            <span class="key">i</span>
            <span class="key">n</span>
            <span class="key">g</span>
            <span class="key-space"> </span>
            <span class="key">s</span>
            <span class="key">o</span>
            <span class="key">o</span>
            <span class="key">n</span>
            <span class="key">.</span>
            <span class="key">.</span>
            <span class="key">.</span>
          </div>
          <div class="ascii-art">
            o__ __o ,__o __o __o ,>/_ -\<, _-\_<, _`\<,_ _ \<_ (*)`(*).....O/
            O.....(*)/'(*).....(*)/ (*).....(_)/(_)
          </div>
        </div>
      </div>
    </div>

    <!-- About Modal -->
    <div class="modal-overlay" id="aboutModal">
      <div class="modal-content">
        <button class="modal-close" id="closeModal">&times;</button>
        <div class="modal-text">
          <p>
            We're Amit Cohen and Daphne Perlman – a creative coding duo
            designing experimental environments for imperfect creativity.
          </p>
          <p>
            We met during our Master's in Design for Technological Environments,
            where we discovered a shared fascination with systems, stories, and
            the beauty of digital flaws.
          </p>
          <p>
            With backgrounds in animation (Amit) and science and biology
            (Daphne), our work blends research, aesthetic exploration, and user
            experience design to craft journeys that feel both emotional and
            procedural.
          </p>
          <p>
            We create spaces that echo the nostalgia of the early internet,
            celebrate glitches and defects, and invite users to wander through
            fragile, living digital ecosystems.
          </p>

          <div class="contact-section">
            <div class="contact-header">
              <h3>Contact us</h3>
              <div class="ascii-art">
                _________ .`. `. / \ .======.\ | | |______|| | | _____ | | | / /
                | | | /____/ | | _ | | |/ \|.-"```"-.| `` ||| ||| `"` `"
              </div>
            </div>
            <div class="contact-items">
              <div class="contact-item">
                <strong>Amit Cohen</strong><br />
                <a href="mailto:amitco1989@gmail.com">amitco1989@gmail.com</a
                ><br />
                <a
                  href="https://www.instagram.com/amit___co?igsh=MTVrYWI4NTNweThrZQ%3D%3D&utm_source=qr"
                  target="_blank"
                  rel="noopener noreferrer"
                  >@amit___co</a
                >
              </div>
              <div class="contact-item">
                <strong>Daphne Perlman</strong><br />
                <a href="mailto:daphneperlman@gmail.com"
                  >daphneperlman@gmail.com</a
                ><br />
                <a
                  href="https://www.instagram.com/daphneperlman?igsh=ajNuZzg3M29uMDg1"
                  target="_blank"
                  rel="noopener noreferrer"
                  >@daphneperlman</a
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Projects Modal -->
    <div class="modal-overlay" id="projectsModal">
      <div class="modal-content playground-modal">
        <button class="modal-close" id="closeProjectsModal">&times;</button>
        <div class="coming-soon">
          <div class="text-container">
            <span class="key">C</span>
            <span class="key">o</span>
            <span class="key">m</span>
            <span class="key">i</span>
            <span class="key">n</span>
            <span class="key">g</span>
            <span class="key-space"> </span>
            <span class="key">s</span>
            <span class="key">o</span>
            <span class="key">o</span>
            <span class="key">n</span>
            <span class="key">.</span>
            <span class="key">.</span>
            <span class="key">.</span>
          </div>
          <div class="ascii-art">
            o__ __o ,__o __o __o ,>/_ -\<, _-\_<, _`\<,_ _ \<_ (*)`(*).....O/
            O.....(*)/'(*).....(*)/ (*).....(_)/(_)
          </div>
        </div>
      </div>
    </div>

    <div class="content text-center">
      <h1 class="experiment-title">Amitco~Daph</h1>
      <div class="cursor typewriter-animation">Creative coding duo.</div>
    </div>

    <!-- Scrollable content to enable scroll detection -->
    <div
      style="
        position: relative;
        z-index: 1;
        background: transparent;
        height: 200vh;
      "
    ></div>

    <!-- STACK CAROUSEL MARKUP -->
    <section id="menuStack" style="--n: 3; --k: 0">
      <article style="--i: 0; --a: -6deg">
        <h2>About</h2>
        <em>Overview</em>
        <img src="assets/About_label.png" alt="About card" />
      </article>
      <article style="--i: 1; --a: 8deg">
        <h2>Projects</h2>
        <em>Selected work</em>
        <img src="assets/Projects_label.png" alt="Projects card" />
      </article>
      <article style="--i: 2; --a: -4deg">
        <h2>Playground</h2>
        <em>Experiments</em>
        <img src="assets/Playground_label.png" alt="Playground card" />
      </article>
    </section>
    <!-- END STACK CAROUSEL MARKUP -->

    <script>
      // Preload all images before starting animation
      const imageUrls = [
        "assets/spinning-ladies/amitco/amitco_1.png",
        "assets/spinning-ladies/amitco/amitco_2.png",
        "assets/spinning-ladies/amitco/amitco_3.png",
        "assets/spinning-ladies/amitco/amitco_4.png",
        "assets/spinning-ladies/amitco/amitco_5.png",
        "assets/spinning-ladies/amitco/amitco_6.png",
        "assets/spinning-ladies/amitco/amitco_7.png",
        "assets/spinning-ladies/amitco/amitco_8.png",
        "assets/spinning-ladies/Daph/Daph2_1.png",
        "assets/spinning-ladies/Daph/Daph2_2.png",
        "assets/spinning-ladies/Daph/Daph2_3.png",
        "assets/spinning-ladies/Daph/Daph2_4.png",
        "assets/spinning-ladies/Daph/Daph2_5.png",
        "assets/spinning-ladies/Daph/Daph2_6.png",
        "assets/spinning-ladies/Daph/Daph2_7.png",
        "assets/spinning-ladies/Daph/Daph2_8.png",
      ];

      let loadedImages = 0;
      const totalImages = imageUrls.length;

      function preloadImages() {
        return new Promise((resolve) => {
          imageUrls.forEach((url) => {
            const img = new Image();
            img.onload = () => {
              loadedImages++;
              if (loadedImages === totalImages) {
                resolve();
              }
            };
            img.onerror = () => {
              loadedImages++;
              if (loadedImages === totalImages) {
                resolve();
              }
            };
            img.src = url;
          });
        });
      }

      // Start animation after all images are loaded
      preloadImages().then(() => {
        // Add a small delay to ensure smooth start
        setTimeout(() => {
          document.body.style.opacity = "1";
        }, 100);
      });

      // Initially hide the body while loading
      document.body.style.opacity = "0";
      document.body.style.transition = "opacity 0.5s ease-in-out";

      // Reset to starting point on page load/refresh
      function resetToStartingPoint() {
        // Remove all scroll-related classes
        document.body.classList.remove("scrolling");
        document.body.classList.remove("moved-to-corners");

        // Reset scroll position to top
        window.scrollTo(0, 0);

        // Reset scroll flags
        hasStartedSpinning = false;
      }

      // Bidirectional scroll detection - figures move based on scroll position
      let hasStartedSpinning = false;
      const scrollThreshold = 100;

      function handleScroll() {
        const scrollY = window.scrollY;

        // Start spinning animation once and keep it forever
        if (!hasStartedSpinning && scrollY > 50) {
          document.body.classList.add("scrolling");
          hasStartedSpinning = true;
        }

        // Move to corners when scrolling down, return to center when scrolling up
        if (scrollY > scrollThreshold) {
          // Scrolled down - move to corners
          document.body.classList.add("moved-to-corners");

          // Navigation buttons will appear automatically via CSS transition
        } else {
          // Scrolled up - return to center (but not after menu became ready)
          if (!document.body.classList.contains("menu-ready")) {
            document.body.classList.remove("moved-to-corners");
          }
        }
      }

      // Start animation on click anywhere
      document.addEventListener("click", () => {
        if (!hasStartedSpinning) {
          document.body.classList.add("scrolling");
          hasStartedSpinning = true;
        }
        // Move to corners on click
        document.body.classList.add("moved-to-corners");
      });

      // Reset on page load/refresh
      window.addEventListener("load", resetToStartingPoint);
      window.addEventListener("beforeunload", () => {
        // Ensure we return to top on refresh
        window.scrollTo(0, 0);
      });

      // Also reset immediately when script runs
      resetToStartingPoint();

      // Add scroll event listener
      window.addEventListener("scroll", handleScroll, { passive: true });

      // Also trigger on touch/wheel events for better responsiveness
      window.addEventListener("wheel", handleScroll, { passive: true });
      window.addEventListener("touchmove", handleScroll, { passive: true });

      // Modal functionality
      const aboutButton = document.querySelector(
        '.nav-button[aria-label="About"]'
      );
      const modal = document.getElementById("aboutModal");
      const closeModal = document.getElementById("closeModal");

      aboutButton?.addEventListener("click", () => {
        modal.classList.add("active");
      });

      closeModal?.addEventListener("click", () => {
        modal.classList.remove("active");
      });

      // Close modal when clicking outside
      modal?.addEventListener("click", (e) => {
        if (e.target === modal) {
          modal.classList.remove("active");
        }
      });

      // Close modal with Escape key
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && modal?.classList.contains("active")) {
          modal.classList.remove("active");
        }
      });

      // Playground modal functionality
      const playgroundButton = document.querySelector(
        '.nav-button[aria-label="Playground"]'
      );
      const playgroundModal = document.getElementById("playgroundModal");
      const closePlaygroundModal = document.getElementById(
        "closePlaygroundModal"
      );

      playgroundButton?.addEventListener("click", () => {
        playgroundModal.classList.add("active");
      });

      closePlaygroundModal?.addEventListener("click", () => {
        playgroundModal.classList.remove("active");
      });

      playgroundModal?.addEventListener("click", (e) => {
        if (e.target === playgroundModal) {
          playgroundModal.classList.remove("active");
        }
      });

      // Projects modal close bindings
      const projectsModal = document.getElementById("projectsModal");
      const closeProjectsModal = document.getElementById("closeProjectsModal");
      closeProjectsModal?.addEventListener("click", () =>
        projectsModal.classList.remove("active")
      );
      projectsModal?.addEventListener("click", (e) => {
        if (e.target === projectsModal)
          projectsModal.classList.remove("active");
      });

      // Sequential menu stages: About -> Projects -> Playground with reverse
      let menuStage = 0; // 0=About,1=Projects,2=Playground
      const applyMenuStage = () => {
        document.body.classList.remove(
          "menu-about",
          "menu-projects",
          "menu-playground"
        );
        if (menuStage === 0) document.body.classList.add("menu-about");
        else if (menuStage === 1) document.body.classList.add("menu-projects");
        else document.body.classList.add("menu-playground");
      };

      // Gate: become ready only after the figures finish moving to corners
      let menuReady = false;
      let menuArmed = false; // prevents the initial enabling scroll from advancing stages
      const tryEnableMenu = () => {
        if (menuReady) return;
        if (document.body.classList.contains("moved-to-corners")) {
          menuReady = true;
          // wait for the figure transition (~1.5s) then show the first card
          setTimeout(() => {
            document.body.classList.add("menu-ready");
            applyMenuStage(); // show About only
            // Arm immediately (we no longer depend on the same scroll)
            lastY = window.scrollY; // reset baseline
            menuArmed = true;
          }, 1500);
        }
      };
      // check immediately and on scroll
      tryEnableMenu();
      window.addEventListener("scroll", tryEnableMenu, { passive: true });

      // Unified stage advance with cooldown
      const advanceMin = 0,
        advanceMax = 2;
      let advanceCooling = false;
      const advanceStage = (dir) => {
        if (!menuReady || !menuArmed || advanceCooling) return;
        const next = Math.max(
          advanceMin,
          Math.min(advanceMax, menuStage + dir)
        );
        if (next === menuStage) return;
        menuStage = next;
        applyMenuStage();
        advanceCooling = true;
        setTimeout(() => {
          advanceCooling = false;
        }, 280); // debounce
      };

      // Re-enable scroll/wheel/touch with unified logic
      let lastY = window.scrollY;
      const changeThreshold = 12;
      const handleMenuStageOnScroll = (e) => {
        if (
          !menuReady ||
          !document.body.classList.contains("menu-ready") ||
          !menuArmed
        )
          return;
        const y = window.scrollY;
        const delta = y - lastY;
        if (Math.abs(delta) >= changeThreshold)
          advanceStage(delta > 0 ? +1 : -1);
        lastY = y;
      };

      window.addEventListener("scroll", handleMenuStageOnScroll, {
        passive: true,
      });
      // Removed duplicate wheel/touch listeners to avoid double-advance
      // window.addEventListener('wheel', handleMenuStageOnScroll, { passive: true });
      // window.addEventListener('touchmove', handleMenuStageOnScroll, { passive: true });

      // Click/keyboard still supported
      const aboutBtnEl = document.querySelector(".about-btn");
      const projectsBtnEl = document.querySelector(".projects-btn");
      const playgroundBtnEl = document.querySelector(".playground-btn");

      const onTopCardClick = (e) => {
        if (!menuReady || !menuArmed) return;
        if (menuStage === 0 && e.currentTarget === aboutBtnEl) advanceStage(+1);
        else if (menuStage === 1 && e.currentTarget === projectsBtnEl)
          advanceStage(+1);
      };

      aboutBtnEl.addEventListener("click", onTopCardClick);
      projectsBtnEl.addEventListener("click", onTopCardClick);

      window.addEventListener("keydown", (e) => {
        if (!menuReady || !menuArmed) return;
        const key = e.key.toLowerCase();
        if (key === "arrowdown" || key === "pagedown" || key === " ")
          advanceStage(+1);
        else if (key === "arrowup" || key === "pageup") advanceStage(-1);
      });

      // Robust image loader: try multiple filename variants if first fails
      (function setupIconFallbacks() {
        const imgs = document.querySelectorAll(
          ".navigation-titles .icon img[data-name]"
        );
        const exts = ["png", "PNG", "webp", "jpg", "jpeg"];
        imgs.forEach((img) => {
          const base = img.getAttribute("data-name");
          const variants = [
            `${base}_lable`,
            `${base}_label`,
            `${base}`,
            `${base.toLowerCase()}_lable`,
            `${base.toLowerCase()}_label`,
            `${base.toLowerCase()}`,
            `${base.toUpperCase()}_LABLE`,
            `${base.toUpperCase()}_LABEL`,
            `${base.toUpperCase()}`,
          ];
          const candidates = [];
          variants.forEach((v) =>
            exts.forEach((ext) => candidates.push(`assets/${v}.${ext}`))
          );
          let idx = 0;
          const tryNext = () => {
            if (idx >= candidates.length) return; // give up
            const next = candidates[idx++];
            if (img.src.endsWith(next)) return; // already set
            img.src = next;
          };
          img.addEventListener("error", tryNext);
          // kick off
          tryNext();
        });
      })();

      // Activate stack carousel on menu-ready
      (function setupStackOnReady() {
        let bound = false;
        const init = () => {
          if (bound) return;
          if (!document.body.classList.contains("menu-ready")) return;
          bound = true;
          // lock page scroll for consistent stepping
          document.body.style.overflow = "hidden";
          const S = document.getElementById("menuStack")?.style;
          if (!S) return;
          const N = 3;
          S.setProperty("--n", N);
          if (!S.getPropertyValue("--k")) S.setProperty("--k", 0);
          let k = +S.getPropertyValue("--k") || 0;
          const step = (inc) => {
            k = (k + inc + N) % N;
            S.setProperty("--k", k);
          };
          const anyModalOpen = () =>
            document.querySelector(".modal-overlay.active") !== null;
          // keyboard fallback
          window.addEventListener("keydown", (e) => {
            if (anyModalOpen()) return;
            const key = e.key.toLowerCase();
            if (
              key === "arrowright" ||
              key === "arrowdown" ||
              key === "pagedown" ||
              key === " "
            )
              step(1);
            if (key === "arrowleft" || key === "arrowup" || key === "pageup")
              step(-1);
          });
          // wheel/touch with cooldown
          let cool = false;
          const COOLDOWN = 700;
          let wheelAccum = 0;
          const WTH = 40;
          let ts = null,
            acc = 0;
          const TTH = 45;
          window.addEventListener(
            "wheel",
            (e) => {
              if (anyModalOpen()) return;
              if (cool) {
                e.preventDefault();
                wheelAccum = 0;
                return;
              }
              wheelAccum += e.deltaY;
              if (wheelAccum > WTH) {
                step(1);
                wheelAccum = 0;
                cool = true;
                e.preventDefault();
                setTimeout(() => (cool = false), COOLDOWN);
              } else if (wheelAccum < -WTH) {
                step(-1);
                wheelAccum = 0;
                cool = true;
                e.preventDefault();
                setTimeout(() => (cool = false), COOLDOWN);
              }
            },
            { passive: false }
          );
          window.addEventListener(
            "touchstart",
            (e) => {
              if (anyModalOpen()) return;
              ts = e.touches[0].clientY;
              acc = 0;
            },
            { passive: false }
          );
          window.addEventListener(
            "touchmove",
            (e) => {
              if (anyModalOpen()) return;
              if (ts == null) return;
              if (cool) {
                e.preventDefault();
                acc = 0;
                return;
              }
              acc += ts - e.touches[0].clientY;
              ts = e.touches[0].clientY;
              if (acc > TTH) {
                step(1);
                acc = 0;
                cool = true;
                e.preventDefault();
                setTimeout(() => (cool = false), COOLDOWN);
              } else if (acc < -TTH) {
                step(-1);
                acc = 0;
                cool = true;
                e.preventDefault();
                setTimeout(() => (cool = false), COOLDOWN);
              }
            },
            { passive: false }
          );
          window.addEventListener(
            "touchend",
            () => {
              if (anyModalOpen()) return;
              ts = null;
              acc = 0;
            },
            { passive: false }
          );
          // click on stack opens the modal for current card
          const stackEl = document.getElementById("menuStack");
          const openModalForIndex = (idx) => {
            const about = document.getElementById("aboutModal");
            const projects = document.getElementById("projectsModal");
            const playground = document.getElementById("playgroundModal");
            if (idx === 0 && about) about.classList.add("active");
            if (idx === 1 && projects) projects.classList.add("active");
            if (idx === 2 && playground) playground.classList.add("active");
          };
          stackEl.addEventListener("click", () => {
            if (!anyModalOpen()) openModalForIndex(k);
          });
        };
        if (document.body.classList.contains("menu-ready")) init();
        const mo = new MutationObserver(() => {
          if (document.body.classList.contains("menu-ready")) {
            init();
            mo.disconnect();
          }
        });
        mo.observe(document.body, {
          attributes: true,
          attributeFilter: ["class"],
        });
      })();
    </script>
  </body>
</html>
